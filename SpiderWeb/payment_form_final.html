<!DOCTYPE html>


<html>
    <head>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
        <style>
            h1 {
                text-align: center;
            }


            .form {
                width: 50%;
                right: 50%;
                left: 50%;
                margin: auto;
                border: 1px solid lightgrey;
                border-radius: 5px;
                background-color: #f2f2f2;
            }

            input {
                display: block;
                margin: auto;
                left: 50%;
                right: 50%;
                margin-bottom: 20px;
                width: 200px;
                height: 30px;
            }

            label {
                display: block;
                width: 200px;
                margin: auto;
                left: 50%;
                right: 50%;
                margin-bottom: 10px;
            }

            .billing, .shipping , .payment {
                display: grid;
                grid-template-columns: auto auto;
            }
            
            

            h2 {
                text-align: center;
            }
            

            input[name="state_billing"], input[name="zip_billing"], label[for="state_billing"], label[for="zip_billing"],
            input[name="state_shipping"], input[name="zip_shipping"], label[for="state_shipping"], label[for="zip_shipping"] {
                width: 85px;
            }


            .zip_and_state {
                display: grid;
                grid-template-columns: auto auto;
                width: 200px;
                margin: auto;
                left: 50%;
                right: 50%;
            }

            input[type="checkbox"] {
                display: inline-block;
                width: auto;
                height: auto;
                margin-left: 20px;
                margin-right: 10px;
            }

            input[type="button"] {
                text-align: center;
                margin: auto;
                right: 50%;
                left: 50%;
                display: block;
                margin-bottom: 30px;
                margin-top: 20px;
                font-size: 15px;
                font-weight: bold;
                height: 30px;
            }


            @media screen and (max-width: 900px) {
                .form {
                    width: 80%;
                }
            }

            @media screen and (max-width: 600px) {
                .form {
                    width: 90%;
                }
            }

            @media screen and (max-width: 500px) {
                .form {
                    width: 100%;
                }

                input {
                    width: 150px;
                }

                label {
                    width: 150px;
                }

                input[name="state_billing"], input[name="zip_billing"], label[for="state_billing"], label[for="zip_billing"],
                input[name="state_shipping"], input[name="zip_shipping"], label[for="state_shipping"], label[for="zip_shipping"] {
                    width: 55px;
                }

                
            }

        </style>

    </head>

    <body>

        <h1>Secure Payment Form</h1>
        <p style="text-align: center;">When it comes to secure payment, you can trust us...</p>

        <div class="form">

            <form>
                <h2>Billing Address</h2>
                <div class="billing">
                    <div class="row1">
                        <label for="fname"><i class="fa fa-user"></i> Full Name</label>
                        <input type="text" id="fname" name="name_billing" placeholder="John Matthew Doe">
                        <label for="email"><i class="fa fa-envelope"></i> Email</label>
                        <input type="text" id="email" name="email_billing" placeholder="john@example.com">
                        <label for="phone"><i class="fa fa-phone"></i> Phone Number</label>
                        <input type="text" id="phone" name="phone_billing" placeholder="111-111-1111">
                    </div>
                    <div class="row2">
                        <label for="adr"><i class="fa fa-address-card-o"></i> Address</label>
                        <input type="text" id="adr" name="address_billing" placeholder="542 W. 15th Street">
                        <label for="city"> <i class="fa fa-institution"></i>City</label>
                        <input type="text" id="city" name="city_billing" placeholder="New York">
                        <div class="zip_and_state">
                            <label for="state_billing"> <i class="fa fa-envelope"></i> State</label>
                            <label for="zip_billing"> <i class="fa fa-address-book"></i> Zip</label>
                            <input type="text" id="state" name="state_billing" placeholder="NY">
                            <input type="text" id="zip" name="zip_billing" placeholder="10001">
                        </div>
                    </div>
                </div>
                <input type="checkbox">Shipping address same as billing.
                <h2 class="shipping_header">Shipping Address</h2>
                <div class="shipping">
                    <div class="row1">
                        <label for="name"><i class="fa fa-user"></i> Full Name</label>
                        <input type="text" id="fname" name="name_shipping" placeholder="John Matthew Doe">
                        <label for="email"><i class="fa fa-envelope"></i> Email</label>
                        <input type="text" id="email" name="email_shipping" placeholder="john@example.com">
                        <label for="phone"><i class="fa fa-phone"></i> Phone Number</label>
                        <input type="text" id="phone" name="phone_shipping" placeholder="111-111-1111">
                    </div>
                    <div class="row2">
                        <label for="adr"><i class="fa fa-address-card-o"></i> Address</label>
                        <input type="text" id="adr" name="address_shipping" placeholder="542 W. 15th Street">
                        <label for="city"> <i class="fa fa-institution"></i>City</label>
                        <input type="text" id="city" name="city_shipping" placeholder="New York">
                        <div class="zip_and_state">
                            <label for="state_shipping"> <i class="fa fa-envelope"></i> State</label>
                            <label for="zip_shipping"> <i class="fa fa-address-book"></i> Zip</label>
                            <input type="text" id="state" name="state_shipping" placeholder="NY">
                            <input type="text" id="zip" name="zip_shipping" placeholder="10001">
                        </div>
                    </div>
                </div>
                <h2>Payment Information</h2>
                <div class="payment">
                    <div class="row1">
                        <label for="name_card">Name on Card</label>
                        <input type="text" id="name_card" name="name_card" placeholder="John Matthew Doe">
                        <label for="card_number">Credit Card Number</label>
                        <input type="text" id="card_number" name="card_number" placeholder="1111-2222-3333-4444">
                    </div>
                    <div class="row2">
                        <label for="expiration_date">Expiration Date</label>
                        <input type="text" id="expiration_date" name="expiration_date" placeholder="MM/YY">
                        <label for="cvv">CVV</label>
                        <input type="text" id="cvv" name="cvv" placeholder="352">
                    </div>
                 
                </div>

                <input type="button" value="Complete Payment">

            </form>
        </div>
        
        <script>
            
            let checkbox_shipping = $('input[type="checkbox"]');
            checkbox_shipping.click(function(){
                if(checkbox_shipping.is(':checked')){
                    console.log("hey");
                    $('.shipping').css("display", "none");
                    $('.shipping_header').css("display", "none");
                }
                else {
                    $('.shipping').css("display", "grid");
                    $('.shipping_header').css("display", "block");
                }
            })
            let submit = $('input[type="button"]');
            submit.click(function(){
                var form_valid = true;
                var special_char = [",", "<", ">", "?", "/", "|", "#", "@", "!", "$", "%", "^", "&", "*", "+", "=", "1", "2", "3", "4", "5", "6", "7", "8", "9", "0"];
                var numbers = ["0", "1", "2", "3", "4", "5", "6", "7", "8", "9"];
                var alert_message;

                var have_to_check_name = [$('input[name="name_billing"]'), $('input[name="name_shipping"]'), $('input[name="name_card"]')]
                var have_to_check_address = [$('input[name="address_billing"]'), $('input[name="address_shipping"]')]
                var have_to_check_city = [$('input[name="city_billing"]'), $('input[name="city_shipping"]')]
                var have_to_check_phone = [$('input[name="phone_billing"]'), $('input[name="phone_shipping"]')]
                var have_to_check_email = [$('input[name="email_billing"]'), $('input[name="email_shipping"]')]
                var have_to_check_zip = [$('input[name="zip_billing"]'), $('input[name="zip_shipping"]')]
                var have_to_check_state = [$('input[name="state_billing"]'), $('input[name="state_shipping"]')]
                var exp = $('input[name="expiration_date"]');
                var card_number = $('input[name="card_number"]');
                var cvv = $('input[name="cvv"]');

                var address_valid_char = ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 
									'U', 'V', 'W', 'X', 'Y', 'Z', 'a', 'b', 'c', 'd','e', 'f', 'g', 'h', 'i' ,'j', 'k', 'l', 'm', 'n', 
									,'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z', ' ', '.', ',', '/', '&', '1', '2', '3'
									, '4', '5', '6', '7', '8', '9', '0'];
            

                //var name_regex_two_names = /^[a-zA-Z]+ [a-zA-Z]+$/;
                //var name_regex_three_names = /^[a-zA-Z] + [a-zA-Z] + [a-zA-Z]+$/;

                var letters_and_space_regex = /^[a-zA-Z\s]*$/; 
                var numbers_regex = /^[0-9]+$/;
                var email_regex = /^([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;
                var address_regex = /^([a-zA-Z0-9\.\s])+$/;
                var phone_regex = /^\(?([0-9]{3})\)?[-./ ]?([0-9]{3})[-./ ]?([0-9]{4})$/;
                var exp_regex = /^(0[1-9]|1[0-2])\/?([0-9]{2})$/;
                var credit_card_regex = /^\(?([0-9]{4})\)?[-./ ]?([0-9]{4})[-./ ]?([0-9]{4})?[-./ ]?([0-9]{4})$/;
                var cvv_regex = /^([0-9]{3})$/;

                function skip_shipping(i)
                {
                    if ($('.shipping').css("display") == "none")
                    {
                        if (i == 1)
                            return true;
                    }
                }
                for (let i = 0; i < have_to_check_name.length; i++)
                {

                    if(skip_shipping(i))
                        continue;

                    
                    console.log("name");
                    let name = have_to_check_name[i].val();
                    console.log("name lenght: " + name.length);
                    have_to_check_name[i].css("background-color", "white");

                    if (!name)
                    {
                        form_valid = false;
                        have_to_check_name[i].css("background-color", "#FA5F55");
                    }

                    else {
                        
                        if (!letters_and_space_regex.test(name))
                        {
                            form_valid = false;
                            have_to_check_name[i].css("background-color", "#FA5F55");
                        }
                        
                    }
                }

                for (let i = 0; i < have_to_check_city.length; i++)
                {
                    if(skip_shipping(i))
                        continue;

                    console.log("name");
                    let city = have_to_check_city[i].val();
                    console.log("city lenght: " + city.length);
                    have_to_check_city[i].css("background-color", "white");

                    if (!city)
                    {
                        form_valid = false;
                        have_to_check_city[i].css("background-color", "#FA5F55");
                    }
                    

                    else {
                        if (!letters_and_space_regex.test(city))
                        {
                            form_valid = false;
                            have_to_check_city[i].css("background-color", "#FA5F55");
                        }
                        
                    }
                }

                
                for (let i = 0; i < have_to_check_address.length; i++)
                {
                    if(skip_shipping(i))
                        continue;
                    console.log("checking address");
                    let address = have_to_check_address[i].val();
                    have_to_check_address[i].css("background-color", "white");
                    if (!address)
                    {
					    form_valid = false;
                        have_to_check_address[i].css("background-color", "#FA5F55");
                    }
                    else {
                        if (!address_regex.test(address))
                        {
                            form_valid = false;
                            have_to_check_address[i].css("background-color", "#FA5F55");
                        }
                        
                    }
                        
                }

        
                for (let i = 0; i < have_to_check_phone.length; i++)
                {
                    if(skip_shipping(i))
                        continue;
                    console.log("checking phone");
                    let phone = have_to_check_phone[i].val();
                    console.log("phone lenght: " + phone.length);
                    have_to_check_phone[i].css("background-color", "white");
                    if (!phone)
                    {
                        console.log("in phone if");
					    form_valid = false;
                        have_to_check_phone[i].css("background-color", "#FA5F55");
                    }
                    else if (phone.length != 12)
                    {
                        form_valid = false;
                        have_to_check_phone[i].css("background-color", "#FA5F55");
                    }
                    else {
                        if (!phone_regex.test(phone))
                        {
                            form_valid = false;
                            have_to_check_phone[i].css("background-color", "#FA5F55");
                        }
                    }
                }

				
                for (let i = 0; i < have_to_check_email.length; i++)
                {
                    if(skip_shipping(i))
                        continue;
                    console.log("email");
                    let email = have_to_check_email[i].val();
                    console.log("email lenght: " + email.length);
                    have_to_check_email[i].css("background-color", "white");

                    if (!email)
                    {
                        form_valid = false;
                        have_to_check_email[i].css("background-color", "#FA5F55");
                    }

                    else if (!email_regex.test(email)) {
                        form_valid = false;
                        have_to_check_email[i].css("background-color", "#FA5F55");

                    }
                }

                

                for (let i = 0; i < have_to_check_zip.length; i++)
                {
                    if(skip_shipping(i))
                        continue;
                    console.log("checking phone");
                    let zip = have_to_check_zip[i].val();
                    console.log("phone lenght: " + zip.length);
                    have_to_check_zip[i].css("background-color", "white");
                    if (!zip)
                    {
                        console.log("in phone if");
					    form_valid = false;
                        have_to_check_zip[i].css("background-color", "#FA5F55");
                    }
                    else if (zip.length != 5)
                    {
                        form_valid = false;
                        have_to_check_zip[i].css("background-color", "#FA5F55");
                    }
                    else {
                        if (!numbers_regex.test(zip))
                        {
                            form_valid = false;
                            have_to_check_zip[i].css("background-color", "#FA5F55");
                        }
                        
                    }
                }

                for (let i = 0; i < have_to_check_state.length; i++)
                {
                    if(skip_shipping(i))
                        continue;
                    console.log("checking phone");
                    let state = have_to_check_state[i].val();
                    console.log("state lenght: " + state.length);
                    have_to_check_state[i].css("background-color", "white");
                    if (!state)
                    {
                        console.log("in phone if");
					    form_valid = false;
                        have_to_check_state[i].css("background-color", "#FA5F55");
                    }
                    else if (state.length != 2)
                    {
                        form_valid = false;
                        have_to_check_state[i].css("background-color", "#FA5F55");
                    }
                    else {
                        if (!letters_and_space_regex.test(state))
                        {
                            form_valid = false;
                            have_to_check_state[i].css("background-color", "#FA5F55");
                        }
                        
                    }
                }

                exp.css("background-color", "white");

                if (!exp.val())
                {
                    form_valid = false;
                    exp.css("background-color", "#FA5F55");
                }
                else if (exp.val().length != 5)
                {
                    form_valid = false;
                    exp.css("background-color", "#FA5F55");
                }
                else {
                    if (!exp_regex.test(exp.val()))
                    {
                        form_valid = false;
                        exp.css("background-color", "#FA5F55");
                    }
                    
                }

                card_number.css("background-color", "white");
                if (!card_number.val())
                {
                    form_valid = false;
                    card_number.css("background-color", "#FA5F55");
                }
                else if (card_number.val().length != 19)
                {
                    form_valid = false;
                    card_number.css("background-color", "#FA5F55");
                }
                else {
                    if (!credit_card_regex.test(card_number.val()))
                    {
                        form_valid = false;
                        card_number.css("background-color", "#FA5F55");
                    }
                    
                }

                cvv.css("background-color", "white");
                if (!cvv.val())
                {
                    form_valid = false;
                    cvv.css("background-color", "#FA5F55");
                }
                else {
                    if (!cvv_regex.test(cvv.val()))
                    {
                        form_valid = false;
                        cvv.css("background-color", "#FA5F55");
                    }
                    
                }
                    
                if (!form_valid)
                {
                    alert("Oops! You are so close to being a part of our web. Just check your input please!");
                }  
                else
                {
                    alert("Thank you. Your payment was successful.");
                    window.location.href = "index.html";
                }

            })

        </script>
    </body>
</html>